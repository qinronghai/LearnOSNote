##  什么式系统调用，有什么作用？

操作系统作为用户和将计算机硬件之间的接口，需要向上提供一些简单易用的服务。主要包括*命令接口* 和 *程序接口*。其中，程序接口由一组系统调用组成。

![image.png](https://pic.rmb.bdstatic.com/bjh/4f8e9a396a45f2eb5d1f9ebd8ab0db0b.jpeg)

1. 命令接口（允许用户直接使用）

	1. 联机命令接口：用户说一句，系统做一句。
	2. 脱机命令接口：用户说一堆，系统做一堆。

2. 程序接口（允许用户通过程序间接使用）

	由一组系统调用组成。

“系统调用”是操作系统提供给应用程序(程序员/编程人员)使用的接口，可以理解为一种可供应用程序调用的特殊函数，应用程序可以发出系统调用请求来获得操作系统的服务。

![image.png](https://pic.rmb.bdstatic.com/bjh/1f9830d167833f0c6950be07b7ad6e00.jpeg)

应用程序通过系统调用请求操作系统的服务。系统中的各种共享资源都由操作系统统一掌管，因此在用户程序中，凡是与资源有关的操作(如存储分配、/O操作、文件管理等)，都必须通过系统调用的方式向操作系统提出服务请求，由操作系统代为完成。这样**可以保证系统的稳定性和安全性**，防止用户进行非法操作。



##  系统调用的背后

![image.png](https://pic.rmb.bdstatic.com/bjh/ae0c13443b9c5a06c97edfb2498a5d23.jpeg)

传递系统调用参数→执行陷入指令（用户态）→执行系统调用相应服务程序（核心态）→返回用户程序注意：

1. 陷入指令是在用户态执行的，执行陷入指令之后立即引发一个内中断，从而CPU进入核心态
2. 发出系统调用请求是在用户态，而对系统调用的相应处理在核心态下进行
3. 陷入指令是唯一一个只能在用户态执行，而不可在核心态执行的指令

 ###  总结

凡是与系统资源有关的操作、会直接影响到其他进程的操作，一定需要操作系统的接入，即需要系统调用来实现。

系统调用发生在用户态，对系统调用的处理发生在核心态。

执行陷入指令会产生内中断，使处理器从用户态进入核心态。

