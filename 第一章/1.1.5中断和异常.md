##  中断机制的诞生

早期的计算机是串行执行的，同一时间内内存总只能存放一道程序，系统资源利用率低。

为了解决上述问题，发明了操作系统（即计算机的管理者），引入中断机制，实现了多道程序并发执行。

本质：发生中断就意味着需要操作系统介入，开展管理工作。

##  中断的概念和作用

1.当中断发生时，CPU立即进入核心态
2.当中断发生后，当前运行的进程暂停运行，并由操作系统内核对中断进行处理
3.对于不同的中断信号，会进行不同的处理

发生了中断，就意味着需要操作系统介入，开展管理工作。由于操作系统的管理工作（比如进程切换、分配/O设备等）需要使用特权指令，因此CPU要从用户态转为核心态。中断**可以使CPU从用户态切换为核心态，使操作系统获得计算机的控制权**。有了中断，才能实现多道程序并发执行。

遗留问题：用户态、核心态之间的切换是怎么实现的？
答：“用户态→核心态”是通过中断实现的。并且中断是**唯一**途径。

“核心态→用户态”的切换是通过执行一个特权指令，将程序状态字(PSW)的标志位设置为“用户态”

##  中断的分类

###  内中断

信号的来源：CPU内部，与当前执行的指令有关。

###  外中断（狭义）

信号的来源：CPU外部，与当前执行的指令无关。

##  外中断的处理过程

![image.png](https://pic.rmb.bdstatic.com/bjh/6bbf49920fcd181d2ae85a26967eb1d2.jpeg)

Step1: 执行完每个指令之后，CPU都要检查当前是否有外部中断信号
Step2: 如果检测到外部中断信号，则需要保护被中断进程的CPU环境（如程序状态字PSW、程序计数器PC、各种通用寄存器）
Step3: 根据中断信号类型转入相应的中断处理程序
Step4: 恢复原进程的CPU环境并退出中断，返回原进程继续往下执行

